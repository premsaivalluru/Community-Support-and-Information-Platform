{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Community Hub</title>
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
</head>
<body>
    <header class="home-page-header">
        <div class="logo-image">
            <img src="{% static 'images/logo.png' %}" alt="Logo" height="80px" width="100px">
        </div>
        <div class=" title">
            <h1>MY COMMUNITY HUB</h1>
            <p>A COMMUNITY SUPPORT & INFORMATION PLATFORM</p>
        </div>
        <div class="Login-Register">
            {% if username %}
                <div class="user">Welcome, {{username}}!  <a href="{% url 'Logout Page' %}">Logout</a></div>
            {% else %}
                <a class="login-btn" href="{% url 'Login Page' %}" >LOGIN</a>
                <span> | </span>
                <a class="register-btn" href="{% url 'Register Page' %}">REGISTER</a>
            {% endif %}
        </div>
        {% if username %}
            <a class="profile-icon" href="{% url 'Profile Page' username %}"><img src="{% static 'images/profile-icon.png' %}" alt="Icon" height="60px" width="60px"></a>
        {% else %}
            <a class="profile-icon" href="{% url 'Login Page' %}"><img src="{% static 'images/profile-icon.png' %}" alt="Icon" height="60px" width="60px"></a>
        {% endif %}
    </header>
    <main class="create-post-main">
        <nav class="navbar">
            <ul class="nav-links">
                <li><a href="{% url 'Home Page' %}">HOME</a></li>
                <li><a href="{% url 'All Posts Page' %}">ALL POSTS</a></li>
                <li><a href="{% url 'Create Post Page' %}">CREATE POST</a></li>
                <li><a href="{% url 'About Page' %}">ABOUT US</a></li>
                <li><a href="{% url 'Feedback Page' %}">FEEDBACK</a></li>
                <li><a href="{% url 'Contact Page' %}">CONTACT US</a></li>
            </ul>
        </nav>
        <nav class="mobile-navbar">
            <div class="menu-icon"><i class="fa-solid fa-bars"></i></div>
            <ul class="mobile-nav-links">
                <li><i class="fa-solid fa-arrow-left"></i></li>
                {% if username %}
                    <li><a href="{% url 'Profile Page'}">Hello! {{username}}</a></li>
                    <li><a href="{% url 'Logout Page' %}">LOGOUT</a></li>
                {% else %}
                    <li><a href="{% url 'Register Page' %}">REGISTER</a></li>
                    <li><a href="{% url 'Login Page' %}">LOGIN</a></li>
                {% endif %}
                <li><a href="{% url 'Home Page' %}">HOME</a></li>
                <li><a href="{% url 'All Posts Page' %}">ALL POSTS</a></li>
                <li><a href="{% url 'Create Post Page' %}">CREATE POST</a></li>
                <li><a href="{% url 'About Page' %}">ABOUT US</a></li>
                <li><a href="{% url 'Feedback Page' %}">FEEDBACK</a></li>
                <li><a href="{% url 'Contact Page' %}">CONTACT US</a></li>
            </ul>
        </nav>
        {% if username %}
            <div class="user-info-section">
                <div class='user-info-card'>
                    <div class='user-photo'>
                        <img src="{{ user_photo.url}}" alt= 'User Photo' height="300px" width="200px">
                    </div>
                    <hr>
                    <div class='user-details'>
                        <p><strong>Username:</strong> {{username}} </p>
                        <p><strong>Full Name: </strong>{{first_name}} {{last_name}}</p>
                        <p><strong>Profession:</strong> {{profession}} </p>
                        <p><strong>Address:</strong> {{address}} </p>
                    </div>
                </div>
            </div>
            <div class="recent-posts">
                {% if posts %}
                    <h2>Posts:</h2>
                    <div class="row1 posts-row">
                        {% for post in posts %}
                        <div class="post1 posts-container">
                            <div class="info1 user-info">
                                <div class="profile-logo">
                                    <a href="{% url 'Profile Page' post.author.username %}">
                                        <img src="{{ user.photo.url|default:'/static/images/profile-icon.png' }}" alt="Profile Logo" height="32px" width="32px">
                                    </a>
                                </div>
                                <div class="info">
                                    <h6>{{ post.author.username }}</h6>
                                    <h6>{{ post.event_date|date:"M d, Y H:i"}}</h6>
                                </div>
                            </div>
                            <hr>
                            <div class="post-title">
                                <h2>{{ post.title}}</h2>
                            </div>
                            <div class="post-content">
                                <p>{{ post.description }}</p>
                            </div>
                            <hr>
                            <div class="post-info">
                                <span class="category">Category: {{ post.category }}<br></span>
                                <span class="location">Location: {{ post.location }}<br></span>
                                <span class="contact">Contact: {{ post.author_phone_number.phone_number}} </span>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                {% else %}
                <div class="no-posts-message">
                    <h2>No Posts to Show</h2>
                    <p>You have not created any posts yet. Go to <a href="{% url 'Create Post Page' %}">Create Post Page<a> to create your first post!</p>
                </div>
                {% endif %}
        {% else %}
        <div class="login-info">
            <h1>Please Login or Register first to post!!!</h1>
            <p>Go to <a href="{% url 'Login Page' %}">Login Page</a> to login | <a href="{% url 'Register Page' %}">Register Page</a> to Get Started</p>
        </div>
        {% endif %}
    </main>
    {% if messages %}
        <script>
            {% for message in messages %}
                alert("{{message}}")
            {% endfor %}
        </script>
    {% endif %}
    <script src="{% static 'script.js' %}"></script>
</body>
</html>